webpackJsonp([1],{NHnr:function(t,i,e){"use strict";function s(t){e("WeZ8")}Object.defineProperty(i,"__esModule",{value:!0});var o=e("7+uW"),n=e("BO1k"),h=e.n(n),r={name:"app",data:function(){return{fileList:[],file:null,x:0,y:0,w:100,h:100,cursor:"default",mProps:{b:null,x:0,y:0,onTopEdge:!1,onLeftEdge:!1,onRightEdge:!1,onBottomEdge:!1},output:""}},computed:{paneClass:function(){return{width:this.w+"px",height:this.h+"px",top:this.y+"px",left:this.x+"px",cursor:this.cursor}}},watch:{file:function(){this.file&&(this.$refs.img.src=URL.createObjectURL(this.file.file))}},methods:{keydown:function(t){var i=!0;switch(t.key){case"ArrowLeft":t.shiftKey?(this.w--,t.altKey&&(this.h=this.w)):t.altKey?this.x-=10:this.x--;break;case"ArrowUp":t.shiftKey?(this.h--,t.altKey&&(this.w=this.h)):t.altKey?this.y-=10:this.y--;break;case"ArrowRight":t.shiftKey?(this.w++,t.altKey&&(this.h=this.w)):t.altKey?this.x+=10:this.x++;break;case"ArrowDown":t.shiftKey?(this.h++,t.altKey&&(this.w=this.h)):t.altKey?this.y+=10:this.y++;break;case"ShiftRight":this.w=this.h;break;case"Enter":this.record();break;default:i=!1}i&&(t.stopPropagation(),t.preventDefault(),this.regularCoords())},getCircle:function(t){return{left:t.x,top:t.y,width:t.w,height:t.h}},record:function(){this.file&&this.file.rects.push({x:this.x,y:this.y,w:this.w,h:this.h})},load:function(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h},regularCoords:function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.w=Math.round(this.w),this.h=Math.round(this.h)},calc:function(t){this.mProps.b=this.$refs.pane.getBoundingClientRect(),this.mProps.x=t.clientX-this.mProps.b.left,this.mProps.y=t.clientY-this.mProps.b.top,this.mProps.onTopEdge=this.mProps.y<6,this.mProps.onLeftEdge=this.mProps.x<6,this.mProps.onRightEdge=this.mProps.x>=this.mProps.b.width-6,this.mProps.onBottomEdge=this.mProps.y>=this.mProps.b.height-6},canMove:function(){return this.mProps.x>0&&this.mProps.x<this.mProps.b.width&&this.mProps.y>0&&this.mProps.y<this.mProps.b.height},mdPane:function(t){this.calc(t);var i=this.mProps.onRightEdge||this.mProps.onBottomEdge||this.mProps.onTopEdge||this.mProps.onLeftEdge;this.clicked={x:this.mProps.x,y:this.mProps.y,cx:t.clientX,cy:t.clientY,w:this.mProps.b.width,h:this.mProps.b.height,isResizing:i,isMoving:!i&&this.canMove(),onTopEdge:this.mProps.onTopEdge,onLeftEdge:this.mProps.onLeftEdge,onRightEdge:this.mProps.onRightEdge,onBottomEdge:this.mProps.onBottomEdge},t.target.focus()},muPane:function(t){this.clicked=null},mmPane:function(t){this.calc(t);var i=this.clicked;if(this.clicked){if(this.clicked.isResizing){if(i.onRightEdge&&(this.w=Math.max(this.mProps.x,20)),i.onBottomEdge&&(this.h=Math.max(this.mProps.y,20)),i.onLeftEdge){var e=Math.max(i.cx-t.clientX+i.w,20);e>20&&(this.w=e,this.x=t.clientX)}if(i.onTopEdge){var s=Math.max(i.cy-t.clientY+i.h,20);s>20&&(this.h=s,this.y=t.clientY)}}else i.isMoving&&(this.y=t.clientY-i.y+this.$refs.main.scrollTop,this.x=t.clientX-i.x+this.$refs.main.scrollLeft);return void this.regularCoords()}this.mProps.onRightEdge&&this.mProps.onBottomEdge||this.mProps.onLeftEdge&&this.mProps.onTopEdge?this.cursor="nwse-resize":this.mProps.onRightEdge&&this.mProps.onTopEdge||this.mProps.onBottomEdge&&this.mProps.onLeftEdge?this.cursor="nesw-resize":this.mProps.onRightEdge||this.mProps.onLeftEdge?this.cursor="ew-resize":this.mProps.onBottomEdge||this.mProps.onTopEdge?this.cursor="ns-resize":this.cursor="default"},make:function(){var t;this.output="";var i=!0,e=!1,s=void 0;try{for(var o,n=h()(this.fileList);!(i=(o=n.next()).done);i=!0){var r=o.value;if(r.rects.length){t=r.name+" "+r.rects.length;var l=!0,c=!1,a=void 0;try{for(var p,u=h()(r.rects);!(l=(p=u.next()).done);l=!0){var d=p.value;t+=" "+(d.x+2)+" "+(d.y+2)+" "+(d.w+2)+" "+(d.h+2)}}catch(t){c=!0,a=t}finally{try{!l&&u.return&&u.return()}finally{if(c)throw a}}this.output+=t+"\n"}}}catch(t){e=!0,s=t}finally{try{!i&&n.return&&n.return()}finally{if(e)throw s}}this.output&&this.copyTextToClipboard()},copyTextToClipboard:function(){var t=document.createElement("textarea");t.style.visible="hidden",t.value=this.output,document.body.appendChild(t),t.select();try{var i=document.execCommand("copy"),e=i?"successful":"unsuccessful";alert("Copying "+e)}catch(t){alert("Oops, unable to copy")}document.body.removeChild(t)},openFile:function(t){this.file={name:t.target.files[0].name,rects:[],file:t.target.files[0]},this.fileList.push(this.file)},del:function(t){this.file.rects.splice(t,1)}}},l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("div",{ref:"main",staticClass:"main",on:{mouseup:t.muPane,mousemove:t.mmPane}},[e("img",{ref:"img"}),t.file?t._l(t.file.rects,function(i,s){return e("div",{key:"i",staticClass:"circle",style:{top:i.y+i.h/2+"px",left:i.x+i.w/2+"px"},on:{click:function(e){t.load(i)}}})}):t._e(),e("div",{ref:"pane",style:t.paneClass,attrs:{id:"pane",tabindex:"1"},on:{dblclick:t.record,keydown:t.keydown,mousedown:function(i){i.preventDefault(),t.mdPane(i)}}})],2),e("div",{staticClass:"side"},[e("input",{ref:"if",attrs:{type:"file",id:"fileInput",name:"file",accept:"image/*"},on:{change:t.openFile}}),e("div",[e("button",{on:{click:function(i){t.$refs.if.click()}}},[t._v("AddFile")]),e("button",{on:{click:t.make}},[t._v("Make & Copy")])]),e("div",{staticClass:"file-list"},[e("h4",[t._v("Files")]),e("ul",[t._l(t.fileList,function(i){return e("li",{key:i.name,class:{active:i==t.file},on:{click:function(e){t.file=i}}},[t._v(t._s(i.name))])}),0==t.fileList.length?e("li",{staticClass:"hint"},[t._v("no image file")]):t._e()],2)]),t.file?e("div",{staticClass:"positions"},[e("h4",[t._v("\bMarkers")]),e("ul",[t._l(t.file.rects,function(i,s){return e("li",{key:"i",on:{click:function(e){t.load(i)}}},[t._v(t._s(s+1)+": "+t._s(i.x)+" "+t._s(i.y)+" "+t._s(i.w)+" "+t._s(i.h)),e("span",{on:{click:function(i){t.del(s)}}},[t._v("X")])])}),0==t.file.rects.length?e("li",{staticClass:"hint"},[t._v("no rect selected, double click rect selecotr to add")]):t._e()],2)]):t._e(),e("div",[e("h4",[t._v("Result")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.output,expression:"output"}],ref:"out",domProps:{value:t.output},on:{input:function(i){i.target.composing||(t.output=i.target.value)}}})])])])},c=[],a={render:l,staticRenderFns:c},p=a,u=e("VU/8"),d=s,f=u(r,p,!1,d,null,null),m=f.exports;o.a.config.productionTip=!1,new o.a({el:"#app",template:"<App/>",components:{App:m}})},WeZ8:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.d6a1caf0dc5cf2d3b6f7.js.map