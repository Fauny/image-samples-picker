webpackJsonp([1],{NHnr:function(t,e,s){"use strict";function i(t){s("S+uL")}Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),n=s("BO1k"),r=s.n(n),h={name:"app",data:function(){return{fileList:[],file:null,x:0,y:0,w:100,h:100,cursor:"default",mProps:{b:null,x:0,y:0,onTopEdge:!1,onLeftEdge:!1,onRightEdge:!1,onBottomEdge:!1},output:""}},computed:{paneClass:function(){return{width:this.w+"px",height:this.h+"px",top:this.y+"px",left:this.x+"px",cursor:this.cursor}}},watch:{file:function(){this.file&&(this.$refs.img.src=URL.createObjectURL(this.file.file))}},methods:{keydown:function(t){var e=!0;switch(t.key){case"ArrowLeft":t.shiftKey?(this.w--,t.altKey&&(this.h=this.w)):t.altKey?this.x-=10:this.x--;break;case"ArrowUp":t.shiftKey?(this.h--,t.altKey&&(this.w=this.h)):t.altKey?this.y-=10:this.y--;break;case"ArrowRight":t.shiftKey?(this.w++,t.altKey&&(this.h=this.w)):t.altKey?this.x+=10:this.x++;break;case"ArrowDown":t.shiftKey?(this.h++,t.altKey&&(this.w=this.h)):t.altKey?this.y+=10:this.y++;break;case"ShiftRight":this.w=this.h;break;case"Enter":this.record();break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault(),this.regularCoords())},getCircle:function(t){return{left:t.x,top:t.y,width:t.w,height:t.h}},record:function(){this.file&&this.file.rects.push({x:this.x,y:this.y,w:this.w,h:this.h})},load:function(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h},regularCoords:function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.w=Math.round(this.w),this.h=Math.round(this.h)},calc:function(t){this.mProps.b=this.$refs.pane.getBoundingClientRect(),this.mProps.x=t.clientX-this.mProps.b.left,this.mProps.y=t.clientY-this.mProps.b.top,this.mProps.onTopEdge=this.mProps.y<6,this.mProps.onLeftEdge=this.mProps.x<6,this.mProps.onRightEdge=this.mProps.x>=this.mProps.b.width-6,this.mProps.onBottomEdge=this.mProps.y>=this.mProps.b.height-6},canMove:function(){return this.mProps.x>0&&this.mProps.x<this.mProps.b.width&&this.mProps.y>0&&this.mProps.y<this.mProps.b.height},mdPane:function(t){this.calc(t);var e=this.mProps.onRightEdge||this.mProps.onBottomEdge||this.mProps.onTopEdge||this.mProps.onLeftEdge;this.clicked={x:this.mProps.x,y:this.mProps.y,cx:t.clientX,cy:t.clientY,w:this.mProps.b.width,h:this.mProps.b.height,isResizing:e,isMoving:!e&&this.canMove(),onTopEdge:this.mProps.onTopEdge,onLeftEdge:this.mProps.onLeftEdge,onRightEdge:this.mProps.onRightEdge,onBottomEdge:this.mProps.onBottomEdge},t.target.focus()},muPane:function(t){this.clicked=null},mmPane:function(t){this.calc(t);var e=this.clicked;if(this.clicked){if(this.clicked.isResizing){if(e.onRightEdge&&(this.w=Math.max(this.mProps.x,20)),e.onBottomEdge&&(this.h=Math.max(this.mProps.y,20)),e.onLeftEdge){var s=Math.max(e.cx-t.clientX+e.w,20);s>20&&(this.w=s,this.x=t.clientX)}if(e.onTopEdge){var i=Math.max(e.cy-t.clientY+e.h,20);i>20&&(this.h=i,this.y=t.clientY)}}else e.isMoving&&(this.y=t.clientY-e.y+this.$refs.main.scrollTop,this.x=t.clientX-e.x+this.$refs.main.scrollLeft);return void this.regularCoords()}this.mProps.onRightEdge&&this.mProps.onBottomEdge||this.mProps.onLeftEdge&&this.mProps.onTopEdge?this.cursor="nwse-resize":this.mProps.onRightEdge&&this.mProps.onTopEdge||this.mProps.onBottomEdge&&this.mProps.onLeftEdge?this.cursor="nesw-resize":this.mProps.onRightEdge||this.mProps.onLeftEdge?this.cursor="ew-resize":this.mProps.onBottomEdge||this.mProps.onTopEdge?this.cursor="ns-resize":this.cursor="default"},make:function(){var t;this.output="";var e=!0,s=!1,i=void 0;try{for(var o,n=r()(this.fileList);!(e=(o=n.next()).done);e=!0){var h=o.value;if(h.rects.length){t=h.name+" "+h.rects.length;var a=!0,l=!1,c=void 0;try{for(var u,p=r()(h.rects);!(a=(u=p.next()).done);a=!0){var m=u.value;t+=" "+(m.x+2)+" "+(m.y+2)+" "+(m.w+2)+" "+(m.h+2)}}catch(t){l=!0,c=t}finally{try{!a&&p.return&&p.return()}finally{if(l)throw c}}this.output+=t+"\n"}}}catch(t){s=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(s)throw i}}this.output&&this.copyTextToClipboard()},copyTextToClipboard:function(){var t=document.createElement("textarea");t.style.visible="hidden",t.value=this.output,document.body.appendChild(t),t.select();try{var e=document.execCommand("copy"),s=this.$t("message."+(e?"successful":"unsuccessful"));alert(this.$t("message.copying")+s)}catch(t){alert(this.$t("message.copyErr"))}document.body.removeChild(t)},openFile:function(t){this.file={name:t.target.files[0].name,rects:[],file:t.target.files[0]},this.fileList.push(this.file)},del:function(t){this.file.rects.splice(t,1)}}},a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{ref:"main",staticClass:"main",on:{mouseup:t.muPane,mousemove:t.mmPane}},[s("img",{ref:"img"}),t.file?t._l(t.file.rects,function(e,i){return s("div",{key:"i",staticClass:"circle",style:{top:e.y+e.h/2+"px",left:e.x+e.w/2+"px"},on:{click:function(s){t.load(e)}}})}):t._e(),s("div",{ref:"pane",style:t.paneClass,attrs:{id:"pane",tabindex:"1"},on:{dblclick:t.record,keydown:t.keydown,mousedown:function(e){e.preventDefault(),t.mdPane(e)}}})],2),s("div",{staticClass:"side"},[s("input",{ref:"if",attrs:{type:"file",id:"fileInput",name:"file",accept:"image/*"},on:{change:t.openFile}}),s("div",[s("button",{on:{click:function(e){t.$refs.if.click()}}},[t._v(t._s(t.$t("message.addFile")))]),s("button",{on:{click:t.make}},[t._v(t._s(t.$t("message.copy")))])]),s("div",{staticClass:"file-list"},[s("h4",[t._v(t._s(t.$t("message.files")))]),s("ul",[t._l(t.fileList,function(e){return s("li",{key:e.name,class:{active:e==t.file},on:{click:function(s){t.file=e}}},[t._v(t._s(e.name))])}),0==t.fileList.length?s("li",{staticClass:"hint"},[t._v(t._s(t.$t("message.noImageFiles")))]):t._e()],2)]),t.file?s("div",{staticClass:"positions"},[s("h4",[t._v("\b"+t._s(t.$t("message.markers")))]),s("ul",[t._l(t.file.rects,function(e,i){return s("li",{key:"i",on:{click:function(s){t.load(e)}}},[t._v(t._s(i+1)+": "+t._s(e.x)+" "+t._s(e.y)+" "+t._s(e.w)+" "+t._s(e.h)),s("span",{on:{click:function(e){t.del(i)}}},[t._v("X")])])}),0==t.file.rects.length?s("li",{staticClass:"hint"},[t._v(t._s(t.$t("message.noMarkers")))]):t._e()],2)]):t._e(),s("div",[s("h4",[t._v(t._s(t.$t("message.result")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.output,expression:"output"}],ref:"out",domProps:{value:t.output},on:{input:function(e){e.target.composing||(t.output=e.target.value)}}})])])])},l=[],c={render:a,staticRenderFns:l},u=c,p=s("VU/8"),m=i,d=p(h,u,!1,m,null,null),f=d.exports,g=s("TXmL");o.a.use(g.a),o.a.config.productionTip=!1;var y={"en-US":{message:{addFile:"Add File",copy:"Make & Copy",files:"Files",noImageFiles:"no image file",noMarkers:"no rect selected, double click rect selecotr to add",markers:"Markers",result:"result",successful:"successful",unsuccessful:"unsuccessful",copyErr:"Oops, unable to copy",copying:"Copying "}},"zh-CN":{message:{addFile:"添加文件",copy:"复制",files:"文件",noImageFiles:"请先添加图像文件",noMarkers:"还没有任何选中标记，在选择框上双击即可添加",markers:"标记",result:"结果预览",successful:"成功",unsuccessful:"失败",copyErr:"复制失败！",copying:"复制"}}},v=new g.a({locale:navigator.language,messages:y});new o.a({el:"#app",template:"<App/>",i18n:v,components:{App:f}})},"S+uL":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8deadd1e6e07ea82e1bd.js.map