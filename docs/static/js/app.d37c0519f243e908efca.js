webpackJsonp([1],{CNEf:function(t,i){},NHnr:function(t,i,e){"use strict";function s(t){e("CNEf")}Object.defineProperty(i,"__esModule",{value:!0});var o=e("7+uW"),n=e("BO1k"),r=e.n(n),h={name:"app",data:function(){return{fileList:[],file:null,x:0,y:0,w:100,h:100,cursor:"default",mProps:{b:null,x:0,y:0,onTopEdge:!1,onLeftEdge:!1,onRightEdge:!1,onBottomEdge:!1},output:""}},computed:{paneClass:function(){return{width:this.w+"px",height:this.h+"px",top:this.y+"px",left:this.x+"px",cursor:this.cursor}}},watch:{file:function(){this.file&&(this.$refs.img.src=URL.createObjectURL(this.file.file))}},methods:{keydown:function(t){switch(console.log(t),t.key){case"ArrowLeft":this.w--,t.shiftKey&&(this.h=this.w);break;case"ArrowUp":this.h--,t.shiftKey&&(this.w=this.h);break;case"ArrowRight":this.w++,t.shiftKey&&(this.h=this.w);break;case"ArrowDown":this.h++,t.shiftKey&&(this.w=this.h);break;case"ShiftRight":this.w=this.h;break;case"Enter":this.record()}},getCircle:function(t){return{left:t.x,top:t.y,width:t.w,height:t.h}},record:function(){this.file&&this.file.rects.push({x:this.x,y:this.y,w:this.w,h:this.h})},load:function(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h},calc:function(t){this.mProps.b=this.$refs.pane.getBoundingClientRect(),this.mProps.x=t.clientX-this.mProps.b.left,this.mProps.y=t.clientY-this.mProps.b.top,this.mProps.onTopEdge=this.mProps.y<6,this.mProps.onLeftEdge=this.mProps.x<6,this.mProps.onRightEdge=this.mProps.x>=this.mProps.b.width-6,this.mProps.onBottomEdge=this.mProps.y>=this.mProps.b.height-6},canMove:function(){return this.mProps.x>0&&this.mProps.x<this.mProps.b.width&&this.mProps.y>0&&this.mProps.y<this.mProps.b.height},mdPane:function(t){this.calc(t);var i=this.mProps.onRightEdge||this.mProps.onBottomEdge||this.mProps.onTopEdge||this.mProps.onLeftEdge;this.clicked={x:this.mProps.x,y:this.mProps.y,cx:t.clientX,cy:t.clientY,w:this.mProps.b.width,h:this.mProps.b.height,isResizing:i,isMoving:!i&&this.canMove(),onTopEdge:this.mProps.onTopEdge,onLeftEdge:this.mProps.onLeftEdge,onRightEdge:this.mProps.onRightEdge,onBottomEdge:this.mProps.onBottomEdge},t.target.focus()},muPane:function(t){this.clicked=null},mmPane:function(t){this.calc(t);var i=this.clicked;if(this.clicked&&this.clicked.isResizing){if(i.onRightEdge&&(this.w=Math.max(this.mProps.x,20)),i.onBottomEdge&&(this.h=Math.max(this.mProps.y,20)),i.onLeftEdge){var e=Math.max(i.cx-t.clientX+i.w,20);e>20&&(this.w=e,this.x=t.clientX)}if(i.onTopEdge){var s=Math.max(i.cy-t.clientY+i.h,20);s>20&&(this.h=s,this.y=t.clientY)}}else{if(i&&i.isMoving)return this.y=t.clientY-i.y+this.$refs.main.scrollTop,void(this.x=t.clientX-i.x+this.$refs.main.scrollLeft);this.mProps.onRightEdge&&this.mProps.onBottomEdge||this.mProps.onLeftEdge&&this.mProps.onTopEdge?this.cursor="nwse-resize":this.mProps.onRightEdge&&this.mProps.onTopEdge||this.mProps.onBottomEdge&&this.mProps.onLeftEdge?this.cursor="nesw-resize":this.mProps.onRightEdge||this.mProps.onLeftEdge?this.cursor="ew-resize":this.mProps.onBottomEdge||this.mProps.onTopEdge?this.cursor="ns-resize":this.cursor="default"}},make:function(){var t;this.output="";var i=!0,e=!1,s=void 0;try{for(var o,n=r()(this.fileList);!(i=(o=n.next()).done);i=!0){var h=o.value;if(h.rects.length){t=h.name+" "+h.rects.length;var c=!0,l=!1,a=void 0;try{for(var p,f=r()(h.rects);!(c=(p=f.next()).done);c=!0){var u=p.value;t+=" "+u.x+" "+u.y+" "+u.w+" "+u.h}}catch(t){l=!0,a=t}finally{try{!c&&f.return&&f.return()}finally{if(l)throw a}}this.output+=t+"\n"}}}catch(t){e=!0,s=t}finally{try{!i&&n.return&&n.return()}finally{if(e)throw s}}this.output&&this.$nextTick(this.clip)},clip:function(){var t=this.$refs.out;t.select(),document.execCommand("Copy"),alert("Copied the text: "+t.value)},openFile:function(t){this.file={name:t.target.files[0].name,rects:[],file:t.target.files[0]},this.fileList.push(this.file)},del:function(t){this.file.rects.splice(t,1)}}},c=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("div",{ref:"main",staticClass:"main",on:{mouseup:t.muPane,mousemove:t.mmPane}},[e("img",{ref:"img"}),t.file?t._l(t.file.rects,function(i,s){return e("div",{key:"i",staticClass:"circle",style:{top:i.y+i.h/2+"px",left:i.x+i.w/2+"px"},on:{click:function(e){t.load(i)}}})}):t._e(),e("div",{ref:"pane",style:t.paneClass,attrs:{id:"pane",tabindex:"1"},on:{dblclick:t.record,keydown:t.keydown,mousedown:function(i){i.preventDefault(),t.mdPane(i)}}})],2),e("div",{staticClass:"side"},[e("input",{ref:"if",attrs:{type:"file",id:"fileInput",name:"file",accept:"image/*"},on:{change:t.openFile}}),e("div",[e("button",{on:{click:function(i){t.$refs.if.click()}}},[t._v("AddFile")]),e("button",{on:{click:t.make}},[t._v("Make & Copy")])]),e("div",{staticClass:"file-list"},[t._v(" files:"),e("ul",[t._l(t.fileList,function(i){return e("li",{key:i.name,class:{active:i==t.file},on:{click:function(e){t.file=i}}},[t._v(t._s(i.name))])}),0==t.fileList.length?e("li",[t._v("no image file")]):t._e()],2)]),t.file?e("div",{staticClass:"positions"},[t._v("sample rects:"),e("ul",[t._l(t.file.rects,function(i,s){return e("li",{key:"i",on:{click:function(e){t.load(i)}}},[t._v(t._s(s+1)+": "+t._s(i.x)+" "+t._s(i.y)+" "+t._s(i.w)+" "+t._s(i.h)),e("span",{on:{click:function(i){t.del(s)}}},[t._v("X")])])}),0==t.file.rects.length?e("li",[t._v("no rect selected, double click rect selecotr to add")]):t._e()],2)]):t._e(),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.output,expression:"output"}],ref:"out",domProps:{value:t.output},on:{input:function(i){i.target.composing||(t.output=i.target.value)}}})])])},l=[],a={render:c,staticRenderFns:l},p=a,f=e("VU/8"),u=s,m=f(h,p,!1,u,null,null),d=m.exports;o.a.config.productionTip=!1,new o.a({el:"#app",template:"<App/>",components:{App:d}})}},["NHnr"]);
//# sourceMappingURL=app.d37c0519f243e908efca.js.map